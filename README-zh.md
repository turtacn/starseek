# StarSeek - æ•°æ®ä»“åº“å…¨æ–‡æ£€ç´¢å¹³å°

[![License](https://img.shields.io/badge/License-Apache%202.0-green.svg)](https://opensource.org/licenses/Apache-2.0)

[ğŸ‡ºğŸ‡¸ English Version](./README.md)

## é¡¹ç›®ç®€ä»‹

StarSeek æ˜¯ä¸€ä¸ªä¼ä¸šçº§å…¨æ–‡æ£€ç´¢ä¸­å°æœåŠ¡ï¼Œä¸“ä¸º **StarRocks**ã€**ClickHouse** å’Œ **Doris** ç­‰åˆ—å¼æ•°æ®åº“è®¾è®¡ã€‚é€šè¿‡ç»Ÿä¸€ç®¡ç†å€’æ’ç´¢å¼•å¹¶æä¾›é«˜çº§æœç´¢åŠŸèƒ½ï¼ŒStarSeek åœ¨ä¼ ç»Ÿæ•°æ®ä»“åº“å’Œç°ä»£æœç´¢å¼•æ“ä¹‹é—´æ¶èµ·äº†æ¡¥æ¢ã€‚

## æ ¸å¿ƒç—›ç‚¹ä¸ä»·å€¼

### è§£å†³çš„æ ¸å¿ƒç—›ç‚¹

- **æ£€ç´¢åˆ†æ•£åŒ–**ï¼šå„è¡¨å€’æ’ç´¢å¼•ç‹¬ç«‹ç®¡ç†ï¼Œç¼ºä¹ç»Ÿä¸€çš„æœç´¢èƒ½åŠ›
- **åŠŸèƒ½å±€é™æ€§**ï¼šåŸç”Ÿæ•°æ®åº“ç¼ºä¹æ’åºã€é«˜äº®ã€è·¨è¡¨æœç´¢ç­‰é«˜çº§åŠŸèƒ½
- **æŸ¥è¯¢æ„å»ºå¤æ‚**ï¼šè·¨å¤šè¡¨é«˜æ•ˆå…¨æ–‡æŸ¥è¯¢éœ€è¦æ·±åº¦SQLä¸“ä¸šçŸ¥è¯†
- **æ€§èƒ½ç“¶é¢ˆ**ï¼šå¤§å‹UNION ALLæŸ¥è¯¢å’Œç¼ºä¹æœç´¢ä¸“ç”¨ä¼˜åŒ–

### æ ¸å¿ƒä»·å€¼ä¸»å¼ 

- **ğŸ¯ ç»Ÿä¸€æœç´¢æ¥å£**ï¼šå•ä¸€APIç«¯ç‚¹æœç´¢æ‰€æœ‰ç´¢å¼•åˆ—å’Œè¡¨
- **ğŸš€ æ€§èƒ½å¢å¼º**ï¼šæ™ºèƒ½æŸ¥è¯¢ä¼˜åŒ–ã€ç¼“å­˜å’Œå¹¶å‘æ‰§è¡Œ
- **â­ é«˜çº§ç‰¹æ€§**ï¼šæ’åºç®—æ³•ã€åˆ†é¡µã€é«˜äº®å’Œç›¸å…³åº¦è¯„åˆ†
- **ğŸ”§ æ˜“äºé›†æˆ**ï¼šRESTful APIï¼Œå­¦ä¹ æˆæœ¬æœ€å°
- **ğŸ“Š å¤šæ•°æ®åº“æ”¯æŒ**ï¼šåŸç”Ÿæ”¯æŒStarRocksã€ClickHouseå’ŒDoris

## ä¸»è¦åŠŸèƒ½ç‰¹æ€§

### ğŸ” å…¨æ–‡æœç´¢å¼•æ“
- è·¨è¡¨ã€è·¨åˆ—æœç´¢èƒ½åŠ›
- å¤šè¯­è¨€åˆ†è¯ï¼ˆä¸­æ–‡ã€è‹±æ–‡ã€å¤šè¯­è¨€ï¼‰
- åŒä¹‰è¯æ‰©å±•å’Œå­—æ®µç‰¹å®šè¿‡æ»¤
- å¸ƒå°”æŸ¥è¯¢æ”¯æŒï¼ˆ`title:AI AND content:æœºå™¨å­¦ä¹ `ï¼‰

### ğŸ“ˆ æ™ºèƒ½æ’åº
- TF-IDFç›¸å…³åº¦è¯„åˆ†æ¨¡æ‹Ÿ
- å¯é…ç½®æ’åºç®—æ³•
- è‡ªå®šä¹‰è¯„åˆ†å› å­å’Œæƒé‡å‚æ•°

### âš¡ æ€§èƒ½ä¼˜åŒ–
- åŸºäºRedisçš„å€’æ’ç´¢å¼•ç¼“å­˜
- BitmapåŠ é€Ÿè¡Œè¿‡æ»¤
- å¹¶å‘æŸ¥è¯¢æ‰§è¡Œä¸æµé‡æ§åˆ¶
- çƒ­é—¨å…³é”®è¯é¢„åŠ è½½

### ğŸ›ï¸ ç®¡ç†ä¸ç›‘æ§
- é›†ä¸­åŒ–ç´¢å¼•æ³¨å†Œè¡¨å’Œå…ƒæ•°æ®ç®¡ç†
- å®æ—¶æŸ¥è¯¢åˆ†æå’Œæ€§èƒ½æŒ‡æ ‡
- å…¨é¢çš„æ—¥å¿—è®°å½•å’Œåˆ†å¸ƒå¼è¿½è¸ª

## å¿«é€Ÿå¼€å§‹

### å‰ç½®æ¡ä»¶
- Go 1.20.2 æˆ–æ›´é«˜ç‰ˆæœ¬
- Redis 6.0+
- æ”¯æŒçš„æ•°æ®åº“ä¹‹ä¸€ï¼ˆStarRocks/ClickHouse/Dorisï¼‰

### å®‰è£…éƒ¨ç½²

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/turtacn/starseek.git
cd starseek

# å®‰è£…ä¾èµ–
go mod download

# æ„å»ºåº”ç”¨
make build

# å¯åŠ¨æœåŠ¡
./bin/starseek --config=config/config.yaml
````

### é…ç½®ç¤ºä¾‹

```yaml
# config/config.yaml
server:
  http_port: 8080
  grpc_port: 9090

databases:
  starrocks:
    host: "localhost"
    port: 9030
    user: "root"
    password: ""
    database: "search_db"
  
redis:
  addr: "localhost:6379"
  password: ""
  db: 0

search:
  max_concurrent_queries: 10
  cache_ttl: "1h"
  default_page_size: 20
```

## API ä½¿ç”¨ç¤ºä¾‹

### åŸºç¡€æœç´¢

```bash
# æœç´¢æ‰€æœ‰ç´¢å¼•åˆ—
curl "http://localhost:8080/api/v1/search?q=äººå·¥æ™ºèƒ½&limit=10"
```

```json
{
  "query": "äººå·¥æ™ºèƒ½",
  "total": 156,
  "results": [
    {
      "table": "articles",
      "row_id": 12345,
      "score": 0.95,
      "highlights": {
        "title": "<em>äººå·¥æ™ºèƒ½</em>çš„æœªæ¥å‘å±•",
        "content": "AIå’Œ<em>æœºå™¨å­¦ä¹ </em>æ­£åœ¨æ”¹å˜..."
      },
      "fields": {
        "title": "äººå·¥æ™ºèƒ½çš„æœªæ¥å‘å±•",
        "content": "AIå’Œæœºå™¨å­¦ä¹ æ­£åœ¨æ”¹å˜å„ä¸ªè¡Œä¸š...",
        "created_at": "2024-01-15T10:30:00Z"
      }
    }
  ],
  "execution_time": "45ms"
}
```

### é«˜çº§å­—æ®µæœç´¢

```bash
# å¸¦å­—æ®µè¿‡æ»¤å’Œå¸ƒå°”æ“ä½œç¬¦çš„æœç´¢
curl "http://localhost:8080/api/v1/search?q=title:AI AND content:æ·±åº¦å­¦ä¹ &fields=title,content,author"
```

### Go SDK ä½¿ç”¨

```go
package main

import (
    "context"
    "fmt"
    "github.com/turtacn/starseek/pkg/client"
)

func main() {
    // åˆå§‹åŒ–StarSeekå®¢æˆ·ç«¯
    client := starseek.NewClient("http://localhost:8080")
    
    // æ‰§è¡Œæœç´¢
    req := &starseek.SearchRequest{
        Query:     "æœºå™¨å­¦ä¹ ",
        Fields:    []string{"title", "content"},
        Limit:     10,
        Highlight: true,
    }
    
    resp, err := client.Search(context.Background(), req)
    if err != nil {
        panic(err)
    }
    
    fmt.Printf("æ‰¾åˆ° %d æ¡ç»“æœï¼Œè€—æ—¶ %s\n", resp.Total, resp.ExecutionTime)
    for _, result := range resp.Results {
        fmt.Printf("è¡¨: %s, è¯„åˆ†: %.2f\n", result.Table, result.Score)
        fmt.Printf("æ ‡é¢˜: %s\n", result.Highlights["title"])
    }
}
```

## æ¶æ„æ¦‚è§ˆ

StarSeek é‡‡ç”¨åˆ†å±‚æ¶æ„ï¼ŒèŒè´£æ¸…æ™°åˆ†ç¦»ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   HTTP/gRPC     â”‚    â”‚   Web æ§åˆ¶å°     â”‚    â”‚   Go SDK        â”‚
â”‚   REST API      â”‚    â”‚   (å¯é€‰)         â”‚    â”‚   å®¢æˆ·ç«¯        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                        â”‚                        â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          åº”ç”¨å±‚                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   æŸ¥è¯¢å¤„ç†å™¨    â”‚  â”‚   ç´¢å¼•æ³¨å†Œè¡¨    â”‚  â”‚   ä»»åŠ¡è°ƒåº¦å™¨    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                        â”‚                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          é¢†åŸŸå±‚                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   æœç´¢å¼•æ“      â”‚  â”‚   æ’åºå¼•æ“      â”‚  â”‚   ç¼“å­˜ç®¡ç†å™¨    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                        â”‚                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        åŸºç¡€è®¾æ–½å±‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   StarRocks     â”‚  â”‚   ClickHouse    â”‚  â”‚     Redis       â”‚  â”‚
â”‚  â”‚     é€‚é…å™¨      â”‚  â”‚     é€‚é…å™¨      â”‚  â”‚     ç¼“å­˜        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

è¯¦ç»†æ¶æ„æ–‡æ¡£è¯·å‚è§ [docs/architecture.md](docs/architecture.md)ã€‚

## æ„å»ºå’Œè¿è¡Œ

### å¼€å‘ç¯å¢ƒ

```bash
# å®‰è£…å¼€å‘ä¾èµ–
make dev-deps

# è¿è¡Œæµ‹è¯•
make test

# çƒ­é‡è½½è¿è¡Œ
make dev

# ä»£ç æ ¼å¼åŒ–
make fmt

# ç”ŸæˆAPIæ–‡æ¡£
make docs
```

### ç”Ÿäº§éƒ¨ç½²

```bash
# æ„å»ºä¼˜åŒ–äºŒè¿›åˆ¶æ–‡ä»¶
make build-prod

# æ„å»ºDockeré•œåƒ
docker build -t starseek:latest .

# ä½¿ç”¨Docker Composeéƒ¨ç½²
docker-compose up -d
```

### æ€§èƒ½åŸºå‡†æµ‹è¯•

| åœºæ™¯      | QPS   | å¹³å‡å»¶è¿Ÿ | P99å»¶è¿Ÿ |
| ------- | ----- | ---- | ----- |
| ç®€å•å…³é”®è¯æœç´¢ | 1,000 | 15ms | 45ms  |
| è·¨è¡¨æœç´¢    | 500   | 35ms | 120ms |
| å¤æ‚å¸ƒå°”æŸ¥è¯¢  | 200   | 85ms | 250ms |

*åŸºå‡†æµ‹è¯•ç¯å¢ƒï¼š4æ ¸16GBå†…å­˜ï¼ŒStarRocksé›†ç¾¤*

## è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿è´¡çŒ®ï¼è¯¦æƒ…è¯·å‚è§ [è´¡çŒ®æŒ‡å—](CONTRIBUTING.md)ã€‚

### å¼€å‘æµç¨‹

1. Fork ä»“åº“
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ï¼ˆ`git checkout -b feature/amazing-feature`ï¼‰
3. æäº¤æ›´æ”¹ï¼ˆ`git commit -m 'Add amazing feature'`ï¼‰
4. æ¨é€åˆ°åˆ†æ”¯ï¼ˆ`git push origin feature/amazing-feature`ï¼‰
5. åˆ›å»º Pull Request

### ä»£ç è§„èŒƒ

* éµå¾ª [Goä»£ç å®¡æŸ¥æ³¨æ„äº‹é¡¹](https://github.com/golang/go/wiki/CodeReviewComments)
* ä¸ºæ–°åŠŸèƒ½æ·»åŠ æµ‹è¯•
* æ›´æ–°APIå˜æ›´çš„æ–‡æ¡£
* ç¡®ä¿æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼ˆ`make test`ï¼‰

## å¼€æºåè®®

æœ¬é¡¹ç›®é‡‡ç”¨ Apache License 2.0 è®¸å¯åè®® - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

## ç¤¾åŒº

* **æ–‡æ¡£**ï¼š[docs.starseek.io](https://docs.starseek.io)
* **é—®é¢˜åé¦ˆ**ï¼š[GitHub Issues](https://github.com/turtacn/starseek/issues)
* **è®¨è®ºäº¤æµ**ï¼š[GitHub Discussions](https://github.com/turtacn/starseek/discussions)

## è‡´è°¢

* [StarRocks](https://github.com/StarRocks/StarRocks) - é«˜æ€§èƒ½åˆ†ææ•°æ®åº“
* [ClickHouse](https://github.com/ClickHouse/ClickHouse) - å¿«é€Ÿåˆ—å¼æ•°æ®åº“
* [Apache Doris](https://github.com/apache/doris) - å®æ—¶åˆ†ææ•°æ®åº“
* [Elasticsearch](https://github.com/elastic/elasticsearch) - æœç´¢å¼•æ“è®¾è®¡å‚è€ƒ

---

**å¦‚æœè§‰å¾—æœ‰ç”¨ï¼Œè¯·ç»™æˆ‘ä»¬ä¸€ä¸ª â­ Starï¼**